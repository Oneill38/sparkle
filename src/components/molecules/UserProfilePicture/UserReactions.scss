@import "scss/constants";

$fadedWhite: rgba(255, 255, 255, 0.8);

// TODO: this was copied from Audience.scss (do we want to move the variable to constants?)
$avatarSize: max(4vh, 3vw);

// TODO: should we move these to using CSS --variables rather than these SCSS vars
$reactionContainerOffset: calc(-1 * #{$avatarSize});
$reactionSize: calc(#{$avatarSize / 1.5});
$reactionOffset: calc(-1 * #{$reactionSize} / 2);
$shoutBounceTranslateXOffset: calc(#{$avatarSize} / 2);

.UserReactions {
  position: relative;

  top: $reactionContainerOffset;
  //z-index: -1;
  //top: 0;
  //left: 0;

  //width: $avatarSize;
  //height: $avatarSize;

  width: 100%;
  height: 100%;

  // TODO: remove this
  background-color: rgba(255, 0, 0, 0.2);
  border: 1px solid #f00;

  &--reaction-left {
    .UserReactions__reaction {
      left: $reactionOffset;
    }

    .UserReactions__shout {
      right: 0;
      transform-origin: right center;
      animation: shout-bounce--left 5s ease;
    }
  }

  &--reaction-right {
    .UserReactions__reaction {
      right: $reactionOffset;
    }

    .UserReactions__shout {
      left: 0;
      transform-origin: calc(#{$avatarSize} / 2) center;
      animation: shout-bounce--right 5s ease;
    }
  }

  &__reaction {
    position: absolute;
    top: $reactionOffset;

    // Note: emoji reactions are sized with font-size
    font-size: $reactionSize;

    animation: reaction-pulse 4s ease-in-out infinite;
  }

  &__shout {
    position: absolute;
    bottom: 0;

    width: max-content;
    max-width: 20em;
    padding: 6px 10px;

    // TODO: this is how the old styled-components had it
    //background-color: rgba(255, 255, 255, 1);
    // TODO: this is how the old (potentially unused) scss had it
    background-color: $fadedWhite;

    color: $black;
    font-size: 20px;
    border-radius: 10px;
  }
}

@keyframes reaction-pulse {
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(1.3);
  }

  100% {
    transform: scale(1);
  }
}

// TODO: can we de-duplicate these with SCSS helper functions/etc?
@keyframes shout-bounce--right {
  0%,
  100% {
    transform: scale(0) translateX(0);
  }

  25% {
    transform: scale(1.25) translateX($shoutBounceTranslateXOffset);
  }

  40%,
  80% {
    transform: scale(1) translateX($shoutBounceTranslateXOffset);
  }
}

// TODO: can we de-duplicate these with SCSS helper functions/etc?
@keyframes shout-bounce--left {
  0%,
  100% {
    transform: scale(0) translateX(0);
  }

  25% {
    transform: scale(1.25)
      translateX(calc(-1 * #{$shoutBounceTranslateXOffset}));
  }

  40%,
  80% {
    transform: scale(1) translateX(calc(-1 * #{$shoutBounceTranslateXOffset}));
  }
}
